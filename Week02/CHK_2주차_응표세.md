노션
https://aerial-cap-9df.notion.site/2-248cbc63ad614ab6bc5011c473a9ac9e




각 계층의 대표적인 프로토콜
<img width="80%" src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/18148ac2-dfe3-475b-9115-62ff9691a356/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220811%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220811T114132Z&X-Amz-Expires=86400&X-Amz-Signature=e92bda550b1c70c22c64d3f4ce5123236cb49811b9e3e5b56ae1911f17a47082&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject"/>



# 7층: 응용계층

- **OSI모델의 최상위 계층으로,  사용자(응용 프로그램)가 OSI환경(네트워크)에 접근할 수 있도록 서비스를 제공한다.**
- 응용 계층에서는 클라이언트의 요청을 전달하기 위해 통신 대상(서버 등)이 이해할 수 있는 메시지(데이터)로 변환하고 전송 계층으로 전달하는 역할을 한다
- 클라이언트 측 어플리케이션(웹 브라우저, 메일 프로그램 등)이 서버 측 어플리케이션(웹 서버 프로그램, 메일 서버 프로그램 등)과 통신하려면 응용 계층의 **프로토콜**을 사용해야 한다.
- 예를 들어, 웹 사이트에 접속할 때는 HTTP , 파일을 전송할 때는 FTP, 메일을 전송할 때는 SMTP, 메일을 받을 때는 POP3, 원격 접속을 할 때는 텔넷(Telnet)이라는 프로토콜을 사용한다. 또한 네트워크에서 컴퓨터나 네트워크 장비에 붙여진 이름을 기반으로 IP 주소를 알아내는 것을 이름 해석(name resolution)이라고 하는데, 이를 위해 DNS를 사용한다.


# 응용계층의 프로토콜

## HTTP (HyperText Transfer Protocol)

- 인터넷상에서 클라이언트(웹 브라우저)와 웹 서버 간에 데이터를 주고받기 위해 사용되는 **서버/클라이언트 모델**을 따르는 네트워크 프로토콜이다.
- **TCP/IP위에서 작동**한다.
- HTTP는 **HTML문서, 이미지, 동영상, 오디오, 텍스트 문서** 등 **어떤 종류의 데이터든지 전송**할 수 있도록 설계되어 있다.

### **HTTP 작동 방식** : 클라이언트-서버

클라이언트에서 요청(request)를 보내면 서버는 요청을 처리해서 응답(response)한다.

<img width="80%" src="https://t1.daumcdn.net/cfile/tistory/99E63F4B5B6FCA4A01"/>

클라이언트는 URI를 이용해서 서버에 접속하고, 데이터를 요청할 수 있다.

서버는 클라이언트의 요청을 받아서, 요청을 해석하고 응답을 한다.

웹서버는 표준 포트인 **80번 포트**로 서비스한다.

### HTTP의 특징 **Connectionless & Stateless**

- HTTP는 연결 상태를 유지하지 않는 비연결성(=무상태,Stateless) 프로토콜이며, **Connectionless 방식**으로 작동한다.
- HTTP는 연결을 유지하지 않는 프로토콜이기 때문에 요청/응답 방식으로 동작한다.
- 서버가 클라이언트에게 받은 요청에 대해 응답을 하고 나면 바로 **클라이언트와의 연결을 끊어버린다**. 따라서 요청이 끝난 후에 서버는 클라이언트의 이전 상황을 알 수 없다. 이러한 특징을 무상태(Stateless)라고 한다. 이러한 단점을 해결하기 위해 쿠키와 세션을 도입하였다.
- 기본적으로는 자원 하나에 대해서 하나의 연결을 만든다.
- 위와 같은 작동방식은 각각 장점과 단점을 가진다
    - **장점 :**
        
        불특정 다수를 대상으로 하는 서비스에 적합한 방식이다.
        
        수십만명이 웹 서비스를 사용하더라도 접속유지는 최소한으로 할 수 있기 때문에, 더 많은 유저의 요청을 처리할 수 있다.
        
    - **단점 :**
        
        연결을 끊어버리기 때문에, 클라이언트의 이전 상태를 알 수가 없다.
        
        해결 방안 → 클라이언트의 이전 상태 정보를 알 수 없게 되면, 클라이언트가 과거에 로그인을 성공하더라도 로그 정보를 유지할 수가 없다. HTTP는 cookie를 이용해서 이 문제를 해결하고 있다.
        
        **Cookie는 클라이언트와 서버의 상태 정보를 담고 있는 정보조각**이다.
        
        EX) 클라이언트가 로그인에 성공하면, 서버는 로그인 정보를 자신의 데이터베이스에 저장하고 동일한 값을 cookie형태로 클라이언트에 보낸다.
        

## FTP(File Transfer Protocol, 파일 전송 프로토콜)

- 서버와 클라이언트 간에 파일을 전송하기 위한 프로토콜이다.
- 일반적으로 통신 포트는 제어 용도로는 21번을 사용하고 데이터 전송 용도로는 20번 포트를 사용한다.
- **제어 연결(Control Connection)**
    - 클라이언트에서 서버로의  연결을 한다. 21번 포트를 사용한다.
    - 명령 또는 응답 형태의 제어정보를 전송한다.
    - 전체 FTP세션 동안 계속 연결 상태를 유지한다.
- **데이터 연결(Data Connection)**
    - 파일이 전송될 때 생성되는 데이터 연결한다. 20번 혹은 1024 이후 포트를 사용한다.
    - 각각의 파일 전송 때마다 설정되면 전송이 완료되면 폐쇄한다.
    

### FTP의 두가지 모드

- **Active Mode (능동모드)**
    
    <img width="80%" src="https://blog.kakaocdn.net/dn/bbcMuS/btqzrILddEC/E4Dx6wp8b36kRDYk7Q75gK/img.png"/>
    
     **Active 모드의 작동 방식**
    
    - ①   1번 클라이언트의 서버의 21번 포트로 접속 후 클라이언트가 사용할 두 번째 포트를 서버에 알려준다.
    - ②   2번 서버는 이에 대해 Ack로 응답한다.
    - ③   3번 서버의 20번 포트는 클라이언트가 알려준 두 번째 포트로 접속을 시도한다.
    - ④   4번 마지막으로 클라이언트가 Ack로 응답한다.
    
    
    **Active 모드의 문제점**
    
    - 부정 침입을 막기 위해 외부로부터의 접속을 막아두어, **서버가 클라이언트에 접속을 시도할 경우 방화벽 또는 공유기 문제가 발생한다.**
    - 이런 경우 FTP 접속은 되지만 이후 데이터 목록을 받아오지 못하여 에러가 발생한다.
    - 이러한 상황에 대응하기 위해 FTP 클라이언트 측에서도 두 번째 접속을 연결하는 패시브 모드가 설정된다.
    
    

- **Passive Mode (수동모드)**

 <img width="80%" src="https://blog.kakaocdn.net/dn/bYVowE/btqzokyIUlE/lZKFkfdkmrSAbwBAMKMI6K/img.png"/>

**Passive 모드의 작동 방식**
- ①   1번 먼저 클라이언트가 Command 포트로 접속을 시도한다.
- ②   2번 서버에서는 서버가 사용할 두 번째 포트를 알려준다.
- ③   3번 클라이언트는 다른 포트를 열어 서버가 알려준 이 포트로 접속을 시도한다.
- ④   4번 서버는 Ack로 응답한다.
- ⑤   Passive 모드에서는 두 번째 data포트로서 active 모드가 사용했던 20번을 사용하지 않고 대신 1024 이후의 임의의 비 특권 포트를 사용한다.**


**Passive 모드의 문제점**

- 서버의 비 특권 포트(1024~65535)를 방화벽에서 모두 열어 두어야 하는 문제점이 발생한다.
- passive mode로 접속 시 사용할 수 있는 포트를 제한 설정할 수 있는 기능을 지원한다.**


## SMTP(Simple Mail Transfer Protocol, 단순 메일 전송 프로토콜)

- 인터넷에서 메일을 송신하는 데 사용하는 프로토콜이다.
- 통신 포트는 일반적으로 25번을 사용한다.
- SMTP를 지원하는 서버를 SMTP 서버라고 하며, SMTP서버는 항상 수신 대기모드를 유지한다. 클라이언트의 TCP연결을 수신하는 즉시 SMTP프로세스는 즉시 25번 포트로 연결을 시작한다.

## POP3(Post Office Protocol version 3)

- 인터넷에서 메일을 수신하는 데 사용하는 프로토콜이다.
- 통신 포트는 일반적으로 110번을 사용한다.
- POP3를 지원하는 서버를 POP3 서버라고 한다.

## DNS(Domain Name System, 도메인 이름 시스템)

- 네트워크에서 **도메인이나 호스트 이름을 IP 주소로 변환**하는 데 사용하는 시스템(서비스)이다.
- UDP와 TCP 포트 53번을 사용한다.
- 도메인이 워낙 많기 때문에 전 세계 모든 조직의 도메인정보를 갖고 있는 DNS 서버는 존재하지 않는다.
- 각 조직은 자신들의 도메인 정보를 관리하는 DNS서버를 자체적으로 운영하고,이러한 수 많은 도메인의 DNS 서버들이 상호 연동되어 있는  Domain Name Space를 구성하게 된다.

Domain Name Space


 <img width="80%" src="https://i0.wp.com/hanamon.kr/wp-content/uploads/2022/04/%E1%84%83%E1%85%A9%E1%84%86%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AB-%E1%84%82%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%B7-%E1%84%89%E1%85%B3%E1%84%91%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3-Domain-Name-Space.png?resize=540%2C490&ssl=1"/>

DNS는 전세계적인 거대한 분산 시스템이다.

도메인 네임 스페이스는 이러한 DNS가 저장 관리하는 계층적 구조를 의미한다.

도메인 네임 스페이스는 최상위에 루트 DNS 서버가 존재하고 그 하위로 연결된 모든 노드가 연속해서 이어진 계층 구조로 되어있다. (폴더 구조와 비슷하다.)

---

# 6층: 표현계층

- **응용계층으로부터 받은 데이터를 세션계층에 보내기 전에 통신에 적당한 형태로 변환하고, 세션계층에서 받은 데이터는 응용계층에 맞게 변환하는 기능을 한다.**
- 대표 프로토콜 :  **ASCII, MPEG, JPEG, MIDI, EBCDIC**

## **JPEG**

- 이미지 압축 프로토콜

## **MPEG**

- 영상 압축 프로토콜

## **MPEG**

- 컴퓨터를 악기, 무대 조명, 기타 시간 지향적인 미디어와 상호 연결하기 위한 표준 프로토콜

---

# 5층: 세션계층

- **송수신 측 간의 관련성을 유지하고 대화 제어를 담당한다.**
- **연결을 원하는 두 이용자 사이의 세션 설정 및 유지를 가능하게 해 줌으로써 두 이용자 간의 대화를 관리하고, 파일 복구 등의 기능을 지원한다.**
- 대표 프로토콜 : **NetBIOS, SAP, SDP, PIPO, SSH, TLS**

## **SSH** (Secure SHell, SSH)

- 네트워크 상의 다른 컴퓨터에 로그인하거나 원격 시스템에서 명령을 실행하고 다른 시스템으로 파일을 복사할 수 있도록 해주는 응용 프로그램 또는 그 프로토콜..
- 즉, 네트워크 프로토콜 중 하나로 컴퓨터와 컴퓨터가 인터넷과 같은 Public Network를 통해서 서로 **통신을 할 때 보안적으로 안전하게 통신을 하기 위해 사용하는 프로토콜**이다.
- 보안때문에 FTP나 Telnet과 같은 다른 컴퓨터 통신을 사용하지 않는 대신, SSH를 사용한다.
- SSH는 보안적으로 훨씬 안전한 채널을 구성한 뒤 정보를 교환하기 때문에 보다 보안성이 뛰어나다.

**어떤 방식으로 서로 다른 컴퓨터가 안전하게 통신하게 하는가?**

- **Public Key and Private Key :
        ▪ SSH는 다른 컴퓨터와 통신할 때 일반적으로 사용하는 비밀번호 입력을 통한 접속을 하지 않는다.
        ▪ 기본적으로 SSH는 한 쌍의 Key를 통해 접속하려는 컴퓨터와 인증 과정을 거친다.
        ▪ 이 한 쌍의 Key는 다음과 같다.
    ◦ Public Key :
        ▪ 단어 뜻 그대로 공개되어도 비교적 안전한 Key.
        ▪ 이 키를 통해 메세지를 전송하기 전 암호화를 한다.
        ▪ 암호화는 가능하지만 복호화는 불가능하다.
    ◦ Private Key :
        ▪ 절대로 외부에 노출되어서는 안되는 Key.
        ▪ 본인의 컴퓨터 내부에 저장하게 되어있다.
        ▪ 암호화된 메세지를 복호화 할 수 있다.**

이 한 쌍의 키는 서로 매우 복잡한 수학적인 관계를 맺고 있다.

이러한 키를 통해 서로다른 컴퓨터와 통신을 하기 위해서는 먼서 Public Key를 통신하고 있는 컴퓨터에 복사하여 저장한다. 그리고 요청을 보내는 클라이언트 사이트 컴퓨터에 접속 요청을 할때 응답을 하는 서버 사이트 컴퓨터에 복사되어 정장된 Public Key와 클라이언트 사이트에 해당 Public Key와 쌍을 이루는 Private Key와 비교를 하여 서로 한 쌍의 Key인지 아닌지 검사한다.

이렇게 서로 관계를 맺고 있는 Key 라는 것이 증명되면 비로소 두 컴퓨터 사이에 암호화된 채널이 형성되어 key를 활용해 메시지를 암호화하고 복호화하며 데이터를 주고 받을 수 있게된다.

## TLS (Transport Layer Security)

- TLS(Transport Layer Security)는 인터넷 상의 커뮤니케이션을 위한 개인 정보와 데이터 보안을 용이하게 하기 위해 설계되어 널리 채택된 보안 프로토콜
- 어플리케이션들이 네트워크 상에서 안전하게 통신하기 위해 사용하며, 이메일, 웹 브라우징, 메세징, 그리고 다른 프로토콜들의 감청을 통한 정보의 변형을 방지한다.

---

문제

1. HTTP의 특징중, 비연결성(무상태)로 인한 문제점과, 이를 해결하기 위해 도입된 것은?
2. 인터넷에서 메일을 보내는데 사용되는 프로토콜의 이름과, 해당 프로토콜이 있는 OSI계층을 쓰세요.
3. FTP 프로토콜의 제어연결과 데이터연결에서 사용하는 포트의 번호는 각각 무엇인가요?
