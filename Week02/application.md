
# Application Layer 프로토콜

## DNS

### DNS의 정의
사람이 읽을 수 있는 도메인 (www.naver.com) 을 IP 주소로 변환하기 위해 사용.
DNS는 일반적으로 UDP프로토콜 위에 정의된다.

DNS는 53번 포트를 사용한다.

### 네임서버
DNS 프로토콜을 통해 질의를 날리면, 도메인을 IP 주소로 변환하는 서비스를 제공하는 서버를 말한다.  

### 도메인 네임 구조

도메인 네임은 계층구조로 이루어져있다.

A.B.C.D.E의 구조로 "."은 도메인의 계층의 구분을, E->D->C->B->A 로 갈수록 낮은 계층이 된다.

예시 :
www.mysite.site123.com 에서

com : 최상위 도메인 (com)
└> site123 : com의 하위 도메인
　└> mysite : site123의 하위 도메인
　　└> www : mysite의 하위도메인


## HTTP

### HTTP의 정의 
HTTP는 WWW 웹에서 정보를 주고 받을 수 있는 프로토콜이며, 주로 HTML문서를 주고 받는데 쓰인다.
HTTP는 클라이언트의 "요청"을 서버가 "응답" 하는 방식으로 이루어진다. 

HTTP는 80번 포트를 사용한다.

### HTTP의 특징
1. Stateless (무상태성) : HTTP는 특정 상태에 따라 동작하지 않으며 오로지 요청에 대한 정보를 이용하여 응답하는 구조를 가진다. 매번 요청 헤더내 정보를 통해 클라이언트를 식별할 수 밖에 없다. 
2. Connectionless (비연결성) : 클라이언트 요청에 대해 서버가 응답을 마치면 맺었던 연결을 끊어버린다. 다만, 한번에 전달해야 하는 리소스가 여러개일때는 Connection: Keep-Alive를 통해 클라이언트가 여러개의 요청을 한번에 받을 수 있도록 한다. 

### HTTP 헤더
HTTP 헤더는 클라이언트 또는 서버가 요청 또는 응답시 메세지에 대한 메타데이터나 부가적인 정보를 전송하는데에 사용한다.
속성을 명시하는데에, Key-Value 구조를 가진다. 이를 엔티티(Entity)라고 부른다.

- 헤더의 종류
HTTP 요청 헤더, HTTP 응답헤더


### 요청 헤더의 구조
헤더 앞, HTTP 메소드와 URL, HTTP버전을 기입한 후 HTTP 엔티티를 덧붙인다.

- 해더의 엔티티

| 헤더이름 | 내용 |
|--|--|
| Host | 요청 호스트에 대한 호스트명(url) 및 포트번호 |
| User-Agent | 클라이언트에 대한 정보 |
| Date | 메세지를 생성한 날짜/시간정보 |
|Connection|클라이언트와 서버간 연결옵선(close/Keep-Alive)|
|Content-Type|해당 개체에 포함되는 컨텐츠의 타입, MIME타입 과 인코딩등을 지정한다.|
|Content-Encoding| 해당 개체 데이터의 압축형식 |
|Content-Length | 해당 개체의 바이트 길이 |
|Location | 300번대 응답일시, 리소스가 리다이렉트된 때에 이동된 주소를 내놓으며 201응답일시 새로 생성된 리소스 주소를 내놓는다. |
|Cookie| 서버의 Set-Cookie에 의해 설정된 클라이언트의 정보 |

### Cookie(쿠키)
서버에 의해 만들어지며, 클라이언트 로컬에 저장되는 Key-Value구조의 단순한 데이터 저장소이다.
반응형 웹에서는 Http가 Stateless함에도,  서버가 클라이언트를 식별할 방법이 필요한데 이를 위해 사용한다.

- 쿠키의 구조
쿠키의 주소(서버) : Key값 : Value값 : Expired(만료일) 로 이루어 져있다.


### 응답 헤더의 구조
HTTP status code와 함께 응답헤더 엔티티를 덧붙인다.

- 헤더의 엔티티

| 헤더이름 | 내용 |
|--|--|
| Expires | 해당 리소스가 캐시로써 언제까지 유효한지 표시한다. |
| Set-Cookie| 서버측이 클라이언트 측에게 세션 쿠기 정보를 설정할때 사용한다. |
| Allow| 클라이언트의 OPTIONS 메소드에 대한 응답값으로 클라이언트가 사용할 수 있는 HTTP 메소드에 대한 질의 결과를 제공한다.|

### HTTP 메소드
HTTP 메소드는 클라이언트가 서버에게 요청의 목적을 알리는 수단이다.

| 메소드 | 내용 |
|--|--|
| Get| 리소스를 조회 (Select)|
| Post | 요청 데이터를 등록 (Create)|
| Put | 리소스를 대체, 리소스가 없다면 생성 (Update)|
| Delete| 리소스를 제거 (Delete)|

### HTTP 상태코드
HTTP 상태 코드는 클라이언트가 보낸 요청의 처리 상태 또는 결과를 응답에서 알려주는 기능을 한다.

- 대표 응답코드 몇가지

| 응답코드 | 내용 |
|--|--|
| 200 OK | 요청이 성공적으로 처리되었음. |
| 201 Created | 요청이 성공적으로 처리되었으며 그 결과로 새로운 리소스가 생성되었음. |
| 204 No Content| 요청이 처리되었으며, 보낼 데이터가 없음. |
| 301 Moved Permanently| 요청한 리소스의 URI가 변경되었음을 의미한다.  |
| 400 Bad Request| 잘못된 문법으로 인해 서버가 요청을 이해할 수 없음.  |
| 401 Unauthorized| 승인을 필요로 하는 데이터에 접근시, 서버가 클라이언트를 식별 할 수 없을 때 내놓습니다.|
| 403 Forbidden| 해당 클라이언트가 데이터에 접근할 권리가 없을때 내놓습니다.  서버는 클라이언트가 누구인지 식별 할 수 있습니다.|
| 404 Not Found| 요청 받은 리소스를 찾을 수 없음.|
| 405 Method Not Allowed| 요청이 사용 할 수 없는 메소드일때 내놓습니다.|
| 413 URI Too Long| 클라이언트가 요청한 URL의 길이가 서버에서 처리하지 않기로 한 길이보다 길 때|
| 429 Too Many Request| 사용자가 서버에 지나치게 많은 요청을 날렸을 시,|
| 500 Internal Server Error| 서버에 문제가 있음. 그러나 클라이언트에게 전달할 내용이 없을때|
| 502 Bad Gateway| 서버가 게이트웨이로 부터 잘못된 응답을 수신했음.|
| 504 Gateway Timeout| 페이지를 로드하려는 웹서버가 요청한 다른 서버로 부터 응답을 받지 못했을때.|


## 기타 프로토콜

### HTTPS
HTTP와 다르게 SSL/TLS 위에 정의되어 있다. 따라서 인증 및 암호화 기능이 제공된다.   HTTPS는 443번 포트를 사용한다.

### SMTP / POP3 / IMAP
인터넷에서 메일을 주고 받기 위한 프로토콜.  SMTP은 메일 서버에 메일을 송신하기 위한 프로토콜, POP3과 IMAP은 메일 서버로 부터 메일을 수신하는 목적을 지닌다.

### FTP
파일을 전송하기 위한 프로토콜. 인증이나 암호화를 제공하지 않으므로, 보안상 중요한 파일을 전송할 때는 SSH위에 정의 된 SFTP프로토콜이나, SSL위에 정의된 FTPS 프로토콜을 이용한다.

### SSH/TELNET
한 컴퓨터에서 다른 컴퓨터로 원격 접속하기 위한 프로토콜이다. 
HTTP와 마찬가지로 서버-클라이언트 방식의 프로토콜이다.

Telnet은 인증 및 암호화 기능을 제공하지 않는다.
SSH는 인증 및 암호화 기능을 제공한다. 


## 연습문제
 1. Application Layer의 주요 프로토콜 한가지만 쓰시오
 
 2. HTTP와 HTTPS의 주요 차이점 하나를 쓰시오
 
 3. DNS / HTTP/ HTTPS 통신에 사용되는 TCP Port 번호를 쓰시오
 
 4. HTTP 응답코드 201번의 의미를 쓰시오

 5. HTTP는  Stateless (무상태성)의 특징을 가지는데, 실제 대부분의 웹사이트에서는 HTTP 프로토콜을 사용함에도 불구하고 사용자가 회원가입 및 로그인을 할 수 있으며, 서버는 클라이언트의 IP주소와 관계없이 로그인 한 사용자를 인증하고 식별할 수 있다.  사용자를 식별하기 위해 어떤 방법을 사용하는가?