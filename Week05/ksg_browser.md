## 브라우저의 기능

- 사용자가 선택한 자원을 서버에 요청하고 브라우저에 표시한다. 이때 자원의 주소는 URI에 의해 정해진다.

- 브라우저는 HTML/CSS 명세서에 따라 HTML 파일을 해석하여 표시한다. 명세서는 웹 표준화 기구 W3C에서 정한다.

- 기타 사용자 인터페이스를 표시한다. 사용자에게 부가적인 기능을 제공한다. (북마크, 이전/다음 페이지, 탭 기능등)

## 브라우저의 기본 구조

![brouser1](https://d2.naver.com/content/images/2015/06/helloworld-59361-1.png)

1. 사용자 인터페이스 - 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부븐
2. 브라우저 엔진 - 사용자 인터페이스와 렌더링 엔진 사이 동작을 제어
3. 렌더링 엔진 - 요청한 콘텐츠를 표시한다.
4. 통신 - HTTP 요청과 같은 네트워크 호출에 사용된다.
5. UI 백엔드 - 콤보박스와 같은 기본정인 장치를 그리며, OS 사용자 인터페이스 체계를 사용한다. 
6. 자바스크립트 해석기 - 자바스크립트 코드를 해석하고 실행
7. 자료 저장소 - 쿠키와 같은 자료를 하드 디스크내 저장할 수 있도록 하는 자료 저장소를 말한다.

## 렌더링 동작과정

  파싱 -> 렌더트리 구축-> 렌더 트리 배치 -> 렌더 트리 그리기
  
![brouser2](https://d2.naver.com/content/images/2015/06/helloworld-59361-2.png)

1. 파싱 - 브라우저가 HTML코드를 이해하고 사용할 수 있는 구조로 바꾸는 일 ,  코드를 어휘 단위로 잘개 쪼갠 뒤, 문법을 검사하고 추상 문법 트리를 만든다.
2. 렌더 트리 구축 - 렌더 트리를 구축한다. 이때 렌더 트리란 표시해야 할 순서와 문서의 시각적인 구성요소를 나타낸 것이다.
3. 렌더 트리 배치 - 렌더 트리내 요소의 적절한 위치 (X축, Y축) 와 크기를 정한다. 
4. 렌더 트리 그리기 - 렌더 트리를 이용하여 최종 UI를 그린뒤, 화면에 표시한다.

## 웹 브라우저내 검색창을 통해 검색시 일어나는 일 

1. 사용자가 URL을 웹 브라우저 검색창에 입력한다.
2. 브라우저는 URL을 파싱한다. protocol, port(80), host 및 path를 획득한다.
3. ip정보를 획득하기 위해 DNS 쿼리를 날린다. (DNS Lookup) 획득하지 못했다면, 상위 DNS서버로 올라간다. 순서는 Local Cache -> Local DNS 서버-> Root DNS 서버 순이다.
4. ip주소를 통해 HTTP Request를 날린다.  

5. 패킷이 NIC, 공유기, 라우터등을 거쳐, 서버내 패킷이 전달된다. 
6. (사설망 이용시) 사설망 내 호스트로 패킷이 보내져 NAT에 의해 ip및 port가 변환하여, 게이트웨이를 통해 서버로 패킷이 전송된다.
7. 서버는 HTTP request를 해석하여 HTTP response를 생성하여 클라이언트에게 전송한다.
8. 클라이언트에게 패킷이 전달 되었다면, http status를 통해 응답코드를 확인하고, 200 OK인 경우, 응답된 데이터의 MIME 및 encoding을 확인하고 브라우저 위에 렌더링한다.
9. 브라우저는 서버로 부터 추가적인 리소스를 가져오기 위해 html내 포함된 다른파일(css, js, jpg, mp3등)의 정보를 통해 HTTP Request를 날린다. 이때, 캐시된 데이터가 있다면, 헤더의 If-Match, If-Modified_Since필드내 ETag를 붙여 Request를 날린다.
10. 서버로 부터 Response가 왔을때 응답코드가 304 Not Modified인 경우, 미리 캐시된 데이터를 사용, 그렇지 않다면 응답헤더내 ETag를 획득하여, 기존에 저장된 캐시데이터를 갱신한다.
  
  
  
## 문제
1. 네이버 검색창에 www.naver.com을 입력하면 브라우저 내부에서 무슨일이 일어나는지 서술하시오.